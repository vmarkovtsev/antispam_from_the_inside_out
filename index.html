<!DOCTYPE html>
<html lang="en">
<head>
	<title>Antispam From The Inside Out</title>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="shower-material/styles/screen-4x3.css">
</head>
<body class="shower list">
	<header class="caption">
		<h1>Antispam From The Inside Out</h1>
		<p>Mail.Ru Group - 26.03.2016 @ MIPT</p>
	</header>
	<section class="slide" id="cover">
		<h2>Antispam From The Inside Out</h2>
		<p><span>Vadim Markovtsev, Mail department / Antispam team</span><span class="push-right">26.03.2016 @ MIPT</span></p>
		<img src="pictures/cover.jpg" alt="" class="cover">
		<!--
			To apply styles to the certain slides
			set slide ID to get needed elements
			-->
		<style>
			#cover h2 {
				margin:255px 0 0;
				color:#FFF;
				text-align:left;
				font-size:50px;
			}
			#cover p {
				margin:40px 0 0;
				text-align:left;
				color:#fff;
				font-style:italic;
				font-size:20px;
			}
			#cover p a {
				color:#FFF;
			}
			.push-right {
				float: right;
			}
		</style>
	</section>
	<section class="slide">
		<h2>View this on your device</h2>
		<a href="http://goo.gl/5x4FzW" style="
		text-align: center;
		font-size: 50px;
		text-decoration: none;
		background: none;
		display: block;
		">goo.gl/5x4FzW</a>
		<img src="pictures/qrcode.png" class="center"/>
	</section>
	<section class="slide">
		<h2>Mail.Ru Mail in numbers</h2>
		<ul>
			<li>80 000 000 active users monthly (30 000 000 daily)</li>
			<li>1 000 000 registrations every day</li>
			<li>500 000 000 emails (72 TB) every day</li>
			<li>700 antispam servers</li>
			<li>1 PB cluster for analytics, 2 PB logs storage</li>
			<li>Largest mail service in Russia; international version is <a href="https://my.com/">my.com</a></li>
		</ul>
	</section>
	<section class="slide">
		<h2>Mail.Ru Antispam from technical point</h2>
		<ul>
			<li>OS: <a href="https://www.centos.org/">CentOS</a> (production),
				<a href="https://en.wikipedia.org/wiki/OS_X">MacOSX</a> (analytics)</li>
			<li>Database: <a href="http://tarantool.org/">Tarantool</a>,
				<a href="https://www.mysql.com/">MySQL</a>,
				<a href="https://memcached.org/">memcached</a></li>
			<li>Analytics: <a href="http://hadoop.apache.org/">Hadoop</a>,
				<a href="http://hbase.apache.org/">HBase</a>,
				<a href="http://pig.apache.org/">Pig</a>,
				<a href="http://gethue.com/">Hue</a></li>
			<li>Monitoring: <a href="https://github.com/graphite-project/graphite-web">Graphite</a>,
			<a href="http://www.zabbix.com/ru/">Zabbix</a>,
			<a href="https://getsentry.com/welcome/">Sentry</a></li>
			<li>Core: C++ engine + <a href="http://www.lua.org/">Lua</a> business logic</li>
			<li>Services: <a href="https://www.python.org/">Python</a>, Lua, Java, Perl</li>
		</ul>
	</section>
	<section class="slide">
		<h2>Analytical tasks</h2>
		<ul>
			<li>Filtering
				<ul>
					<li>Spam removal</li>
					<li>Bots detection</li>
				</ul>
			</li>
			<li>Security
				<ul>
					<li>Password anti-bruteforce</li>
					<li>Break-in detection</li>
				</ul>
			</li>
			<li>Product</li>
		</ul>
	</section>
	<section class="slide">
		<h2>Operational tasks</h2>
		<ul>
			<li>Attack vectors
				<ul>
					<li>Reaction</li>
					<li>Prediction</li>
				</ul>
			</li>
			<li>Performance improvement
				<ul>
					<li>Profiling</li>
					<li>Debugging</li>
				</ul>
			</li>
			<li>Durability
				<ul>
					<li>Fail-safety arrangements</li>
					<li>Refactoring</li>
				</ul>
			</li>
		</ul>
	</section>
	<section class="slide">
		<h2>Spam tradeoffs</h2>
		<p class="double">how much spam is allowed <span class="vs">vs.</span> how comfortable
		user is.
		<img src="pictures/spam_policy.png" class="spam-xkcd center"/>
		<span class="next">
		system load <span class="vs">vs.</span> how well emails are analyzed.
		<img src="pictures/performance_quality.png" class="spam-xkcd center"/>
		</span>
		<style>
		.spam-xkcd {
			width: 400px;
			margin-top: 60px;
		}
		.vs {
			color: red;
		}
		.center {
			margin-left: auto;
			margin-right: auto;
			display: table;
		}
		</style>
	</section>
	<section class="slide">
		<h2 class="shout shrink">Technologies</h2>
	</section>
	<section class="slide">
		<h2>Machine Learning</h2>
		<figure>
			<blockquote>
		    <p>A subfield of computer science[1] that evolved from the study of pattern recognition and computational learning theory in artificial intelligence.</p>
				<figcaption><a href="https://en.wikipedia.org/wiki/Machine_learning">Wikipedia</a></figcaption>
			</blockquote>
		</figure
		<p><br /><br />
		In other words, real-life problems are stated as optimization problems (models)
		which are subsequently solved by various methods (machine learning algorithms) on
		computers without direct human participation.
		</p>
	</section>
	<section class="slide">
		<h2>Example: clustering</h2>
		<img src="pictures/plot_cluster_comparison.png" class="center" style="
		width: 820px;
		margin-top: 50px;
		"/>
	</section>
	<section class="slide">
		<h2>Big Data?</h2>
		<figure>
			<blockquote>
				<p>A term for data sets that are so large or complex that traditional data processing applications are inadequate.</p>
			</blockquote>
			<figcaption><a href="https://en.wikipedia.org/wiki/Big_data">Wikipedia</a></figcaption>
		</figure>
		<p>
		<br />This may include:
		<ul>
			<li>Large datasets which do not fit into 1 computer</li>
			<li>Large data streams which cannot be stored on disk</li>
			<li>Need for high algorithmic parallelism</li>
		</ul>
	</p>
	</section>
	<section class="slide">
		<h2>Big Data?</h2>
	  <p>Most of the everyday problems
			<a href="https://habrahabr.ru/company/mlclass/blog/258475/">are <em>not</em></a> big data.</p>
		<img src="pictures/meme.jpg" class="center" style="height: 400px;" />
	</section>
	<section class="slide">
		<h2>Big Data &amp; Machine Learning</h2>
		<img src="pictures/xkcd.png" class="center" style="
		height: 380px;
		margin-top: 80px;
		">
	</section>
	<section class="slide">
		<h2>Hadoop stack</h2>
		<a href="https://en.wikipedia.org/wiki/Apache_Hadoop">HDFS + YARN</a>,
		<a href="https://ru.wikipedia.org/wiki/MapReduce">MapReduce</a>,
		<a href="https://en.wikipedia.org/wiki/Pig_(programming_tool)">Pig</a>,
		<a href="https://en.wikipedia.org/wiki/Hue_(Hadoop)">Hue</a>
		<p class="double">
			<img src="pictures/pyramid.png" class="center" style="
			margin-top: 40px;
			"/>
			<img src="pictures/piglatin.png" id="piglatin"/>
			<style>
			#piglatin {
				margin-left: -20px;
				margin-top: 50px;
			}
			</style>
		</p>
	</section>
	<section class="slide">
		<h2>MapReduce</h2>
		<img src="pictures/mapreduce.png" class="center" style="
		width: 700px;
		">
	</section>
	<section class="slide">
		<h2>IPython</h2>
		<iframe width="100%" height="480px" frameborder="0" scrolling="no"
		marginheight="0" marginwidth="0" seamless="" src="https://nature.tmpnb.org"
		id="ipython">
	  </iframe>
	</section>
	<section class="slide">
		<h2>Highload challenges</h2>
		<ul>
			<li>Extreme parallelism. Each mutex is counted.
				<a href="https://en.wikipedia.org/wiki/Epoll">epoll</a> is essential.</li>
			<li>Extreme storage requirements: solved by <a href="https://habrahabr.ru/company/mailru/blog/273695/">Tarantool</a></li>
			<li>Tiniest memory leak becomes a disaster
				<ul>
					<li><a href="http://valgrind.org/">valgrind</a>'s massif is not an option sometimes</li>
					<li><a href="http://goog-perftools.sourceforge.net/doc/tcmalloc.html">tcmalloc</a> heap profiling</li>
				</ul>
			</li>
			<li><a href="http://exceptionsafecode.com/">C++ exception safety.</a></li>
			<li>BL engine must be as fast as possible - <a href="http://luajit.org/">LuaJIT</a></li>
			<li>Logging is hard. There is a special infrastructure based on
				<a href="https://github.com/graphite-project/graphite-web">Graphite</a>.</li>
		</ul>
	</section>
	<section class="slide">
		<h2 class="shout shrink">Examples</h2>
	</section>
	<section class="slide">
		<h2>Bots ("autoregs")</h2>
		<ul>
			<li>Classify Mail registrations either as "normal" or "bot"</li>
			<li>Problems:
				<ul>
					<li>Noisy unbalanced dataset</li>
					<li>Variety of signatures</li>
				</ul>
			</li>
			<li>Features:
				<ul>
					<li>Lexical</li>
					<li>Geolocational</li>
					<li>Metadata</li>
					<li>Other</li>
				</ul>
			</li>
			<li>Implementation: Python, Lua</li>
		</ul>
	</section>
	<section class="slide">
		<h2>Autoregs - algorithm</h2>
		<ol>
			<li>Merge different data streams</li>
			<li>Cluster (modified s-means, similar to
				<a href="https://en.wikipedia.org/wiki/DBSCAN">DBSCAN</a>)</li>
			<li>Classify (<a href="https://en.wikipedia.org/wiki/Logistic_regression">logistic regression</a>)</li>
			<li>Apply negative reinforcement</li>
			<li>Merge with the previous state</li>
			<li>Back by humans</li>
		</ol>
	</section>
	<section class="slide">
		<h2>Sender reputation</h2>
		<ul>
			<li>Forecast the spam reports number</li>
			<li>Based on sender classification and typical behavior patterns</li>
			<li>Depends on the context, e.g. time and date</li>
			<li>Implementation: Python, Lua</li>
		</ul>
	</section>
	<section class="slide">
		<h2>Break-ins</h2>
		<ul>
			<li>Detect account hijacking</li>
			<li>Based on comparison of user's actions with the collected profile</li>
			<li>Features:
				<ul>
					<li>UI actions</li>
					<li>Used devices</li>
					<li>Geolocational</li>
				</ul>
			</li>
			<li>Implementation: Pig, Python</li>
		</ul>
	</section>
	<section class="slide">
		<h2>Break-ins</h2>
		<iframe src="https://www.slideshare.net/slideshow/embed_code/59880028"
		width="595" height="485" frameborder="0" marginwidth="0" marginheight="0"
		scrolling="no" style="border:1px solid #CCC;
		border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen class="center"> </iframe>
	</section>
	<section class="slide">
		<h2>Secret projects</h2>
		<ul>
			<li>Anti-bruteforce</li>
			<li>Fraud spam detection</li>
			<li>First line support helper</li>
			<li>Many, maaany more</li>
		</ul>
	</section>
	<section class="slide">
		<h2 class="shout shrink">Finally</h2>
	</section>
	<section class="slide">
		<h2>I want to do machine learning</h2>
		<ul>
			<li>Study theory: <a href="https://www.coursera.org/learn/introduction-machine-learning">Coursera</a></li>
			<li>Study Python: <a href="http://scikit-learn.org/stable/">sklearn</a></li>
			<li>Take part in
				<a href="https://www.hackerrank.com/domains/ai/machine-learning/difficulty/all/page/2">HackerRank</a>
				and <a href="https://www.kaggle.com/competitions">Kaggle</a> challenges</li>
		</ul>
		To become familiar with Big Data tools, play with a single-node Hadoop installation.
	</section>
	<section class="slide">
		<h2>I want to code highload solutions</h2>
		<ul>
			<li>Strong C++ is a must</li>
			<li>Linux internals knowledge is a must</li>
			<li>Gain experience in a relevant company</li>
		</ul>
	</section>
	<section class="slide">
		<h2 class="shout shrink">Thanks<br />goo.gl/5x4FzW</h2>
	</section>
	<div class="progress"></div>
	<script src="shower/shower.min.js"></script>
</body>
</html>
